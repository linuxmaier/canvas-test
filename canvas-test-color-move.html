<!DOCTYPE html>
<html>
<head>
<title>Canvas Testing Ground</title>
</head>
<body>
<h1 id="head1">!!WARNING - CANVAS TESTING GROUND!!</h1>
<p id="preface">This is my canvas testing ground.</p>
<canvas id="testingGround" width=1000 height=750 style="border:1px solid #000000;">Canvas didn't render.</canvas>
<script>
(function() {
  var requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;
  window.requestAnimationFrame = requestAnimationFrame;
})();

function drawRect (myRect, ctext) {
	ctext.beginPath();
	ctext.rect(myRect.x, myRect.y, myRect.width, myRect.height);
	ctext.fillStyle = myRect.fillingStyle;
	ctext.fill();
	ctext.lineWidth = myRect.borderWidth;
	ctext.strokeStyle = "black";
	ctext.stroke();
}

function animate(myRect, tground, ctext, startTime) {
	var time = (new Date()).getTime() - startTime;
	var linearSpeed = 10;

	if (keys[38]) {
		if (myRect.y > 0) {
			myRect.y -= linearSpeed;
			myRect.fillingStyle = "#FF0000";
		}
		else {
			myRect.y = 0;
		}
	}
	if (keys[37]) {
		if (myRect.x > 0) {
			myRect.x -= linearSpeed;
			myRect.fillingStyle = "#0000FF";
		}
		else {
			myRect.x = 0;
		}
	}
	if (keys[40]) {
		if (myRect.y < tground.height - myRect.height - myRect.borderWidth / 2) {
			myRect.y += linearSpeed;
			myRect.fillingStyle = "#000000";
		}
		else {
			myRect.y = tground.height - myRect.height - myRect.borderWidth / 2;
		}
	}
	if (keys[39]) {
		if (myRect.x < tground.width - myRect.width - myRect.borderWidth / 2) {
			myRect.x += linearSpeed;
			myRect.fillingStyle = "#00FF00";
		}
		else {
			myRect.x = tground.width - myRect.width - myRect.borderWidth / 2;
		}
	}
	
	ctext.clearRect(0, 0, tground.width, tground.height);

	drawRect(myRect, ctext);
	
	requestAnimationFrame(function() { animate(myRect, tground, ctext, startTime);});
}

var tground = document.getElementById("testingGround");
var ctext = tground.getContext("2d");

var myRect = {
x: 0,
y: 75,
width: 100,
height: 50,
borderWidth: 1,
fillingStyle: "#00FF00"
};

var keys = [];

drawRect(myRect, ctext);

document.body.addEventListener("keydown", function (e) { keys[e.keyCode] = true; });

document.body.addEventListener("keyup", function (e) { keys[e.keyCode] = false; });

setTimeout(function() {
	var startTime = (new Date()).getTime();
	animate(myRect, tground, ctext, startTime);
}, 1000);
</script>
</body>
</html>
